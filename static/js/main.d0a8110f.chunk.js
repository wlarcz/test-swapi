(this["webpackJsonptest-swapi"]=this["webpackJsonptest-swapi"]||[]).push([[0],{15:function(e,t,a){e.exports={header:"Header_header__1lhMN",menu:"Header_menu__hs1d3",menuLink:"Header_menuLink__1xUdx",activeLink:"Header_activeLink__2l0IM"}},19:function(e,t,a){e.exports={character_card:"CharacterItem_character_card__1O1BC",character_img:"CharacterItem_character_img__3OcFf",character_info:"CharacterItem_character_info__3Y7S4",favButton:"CharacterItem_favButton__1gs4f"}},28:function(e,t,a){e.exports={character_list:"MainPage_character_list__3lK4F",pagination:"MainPage_pagination__YZHOH",active:"MainPage_active__2Mnqa"}},32:function(e,t,a){e.exports={character_list:"FavoriteCharacters_character_list__19krI",character_card:"FavoriteCharacters_character_card__WIUYE",character_img:"FavoriteCharacters_character_img__1JzHv",character_info:"FavoriteCharacters_character_info__1EGCW",buttonContainer:"FavoriteCharacters_buttonContainer__1r3WS"}},49:function(e,t,a){e.exports={inputForm:"CharactersSearchForm_inputForm__1Chi3"}},54:function(e,t,a){},55:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(20),i=a.n(n),s=(a(54),a(18)),o=a(4),h=(a(55),a(36)),u=a(3),l="ADD-TO-FAVORITE",p="DELETE-FROM-FAVORITE",v="SET-CHARACTERS",d="SET-FAVORITE-CHARACTERS",j="SET-CURRNET-PAGE",f="SET_TOTAL_CHARACTERS_COUNT",C="SET-FILTER",m={characters:[],favoriteCharacters:[],pageSize:10,totalCharactersCount:0,currentPage:1,filter:{term:""}},b=function(e,t,a){return{type:l,character:e,imgUrl:t,isFavorite:a}},g=function(){return{type:p}},O=function(e){return{type:d,favoriteCharacters:e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{favoriteCharacters:[].concat(Object(h.a)(e.favoriteCharacters),[{name:t.character,imgUrl:t.imgUrl,isFavorite:!0}])});case p:var a=Object(u.a)({},e);return a.favoriteCharacters=Object(h.a)(e.favoriteCharacters),a.favoriteCharacters=[],a;case v:return Object(u.a)(Object(u.a)({},e),{},{characters:t.characters,term:t.term});case d:return Object(u.a)(Object(u.a)({},e),{},{favoriteCharacters:t.favoriteCharacters,term:t.term});case j:return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.currentPage});case f:return Object(u.a)(Object(u.a)({},e),{},{totalCharactersCount:t.totalCharactersCount});case C:return Object(u.a)(Object(u.a)({},e),{},{filter:{term:t.filter.term}});default:return e}},F=a(17),x=a(21),S=a(22),T=a(26),N=a(25),y=a(19),P=a.n(y),k=a(1),E=function(e){return Object(k.jsxs)("div",{className:P.a.character_card,children:[Object(k.jsx)("div",{children:Object(k.jsx)("img",{className:P.a.character_img,src:e.imgUrl,alt:"character"})}),Object(k.jsxs)("div",{className:P.a.character_info,children:[Object(k.jsx)("div",{children:Object(k.jsx)("span",{children:e.name})}),Object(k.jsx)("div",{className:P.a.favButton,children:e.isFavorite?Object(k.jsx)("div",{}):Object(k.jsx)("button",{type:"submit",onClick:function(){e.addToFavorite(e.name,e.imgUrl,e.isFavorite)},children:"\u2764"})})]})]})},w=a(32),I=a.n(w),R=function(e){Object(T.a)(a,e);var t=Object(N.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("favorite character"),t=JSON.parse(e);t&&Object(u.a)(Object(u.a)({},this.props),{},{favoriteCharacters:t}).setFavCharacters(t)}},{key:"render",value:function(){var e=this,t=this.props.favoriteCharacters.map((function(t){return Object(k.jsx)(E,{name:t.name,imgUrl:t.imgUrl,isFavorite:t.isFavorite,deleteFromFavorite:e.props.deleteFromFavorite},t.name)}));return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"\u041c\u043e\u0438 \u043b\u044e\u0431\u0438\u043c\u044b\u0435 \u043f\u0435\u0440\u0441\u044b"}),Object(k.jsx)("div",{className:I.a.buttonContainer,children:Object(k.jsx)("button",{onClick:function(){e.props.deleteFromFavorite(),localStorage.clear()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435\u0445"})}),Object(k.jsx)("div",{className:I.a.character_list,children:t})]})}}]),a}(c.a.Component),U=Object(F.b)((function(e){return{favoriteCharacters:e.favoriteCharacters.favoriteCharacters}}),(function(e){return{addToFavorite:function(){e(b())},deleteFromFavorite:function(){e(g())},setFavCharacters:function(t){e(O(t))}}}))(R),A=a(15),L=a.n(A),H=function(){return Object(k.jsx)("header",{className:L.a.header,children:Object(k.jsxs)("ul",{className:L.a.menu,children:[Object(k.jsx)("li",{children:Object(k.jsx)(s.b,{exact:!0,to:"/",className:L.a.menuLink,activeClassName:L.a.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(k.jsx)("li",{children:Object(k.jsx)(s.b,{to:"/favorites",className:L.a.menuLink,activeClassName:L.a.activeLink,children:"\u041b\u044e\u0431\u0438\u043c\u044b\u0435 \u0433\u0435\u0440\u043e\u0438"})})]})})},M=a(27),z=a.n(M),D=a(28),J=a.n(D),B=a(29),V=a(49),W=a.n(V),Y=function(e){return{}},G=function(e){return Object(k.jsx)("div",{className:W.a.inputForm,children:Object(k.jsx)(B.c,{initialValues:{term:""},validate:Y,onSubmit:function(t,a){var r=a.setSubmitting;e.onFilterChanged(t),r(!1)},children:function(e){var t=e.isSubmitting;return Object(k.jsxs)(B.b,{children:[Object(k.jsx)(B.a,{type:"text",name:"term",placeholder:"\u041d\u0430\u0439\u0442\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430"}),Object(k.jsx)("button",{type:"submit",disabled:t,children:"\u041f\u043e\u0438\u0441\u043a"})]})}})})},q=function(e){for(var t=Math.ceil(e.totalCharactersCount/e.pageSize),a=[],r=1;r<=t;r++)a.push(r);return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0438 \u0417\u0432\u0435\u0437\u0434\u043d\u044b\u0445 \u0412\u043e\u0439\u043d"}),Object(k.jsx)(G,{onFilterChanged:e.onFilterChanged}),Object(k.jsx)("div",{className:J.a.pagination,children:a.map((function(t){return Object(k.jsx)("button",{className:e.currentPage===t?J.a.active:"",onClick:function(){e.onPageChanged(t)},children:t},t)}))}),Object(k.jsx)("div",{className:J.a.character_list,children:e.characters.map((function(t){return Object(k.jsx)(E,{name:t.name,imgUrl:t.imgUrl,addToFavorite:e.addToFavorite,isFavorite:e.isFavorite},t.name)}))})]})},K=function(e){Object(T.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).onPageChanged=function(t){e.props.setCurrentPage(t),z.a.get("https://swapi.dev/api/people/?page=".concat(t,"&count=").concat(e.props.pageSize)).then((function(t){var a=e.newResponse(t);e.props.setCharacters(a.data.results,"")}))},e.onFilterChanged=function(t){e.props.setFilter(t),z.a.get("https://swapi.dev/api/people/?search=".concat(e.props.term)).then((function(t){var a=e.newResponse(t);e.props.setCharacters(a.data.results)}))},e}return Object(S.a)(a,[{key:"getUrlCharacter",value:function(e,t){var a=e.data.results[t].url.slice(0,-1).replace("http://swapi.dev/api/people/","https://starwars-visualguide.com/assets/img/characters/");return"".concat(a,".jpg")}},{key:"newResponse",value:function(e){for(var t=Object(u.a)({},e),a=t.data.results.length,r=0;r<a;r++){var c=this.getUrlCharacter(t,r);t.data.results[r].imgUrl=c,t.data.results[r].isFavorite=!1}return t}},{key:"componentDidMount",value:function(){var e=this;0===this.props.characters.length&&z.a.get("https://swapi.dev/api/people/?search=".concat(this.props.term,"&page=").concat(this.props.currentPage,"&count=").concat(this.props.pageSize)).then((function(t){var a=e.newResponse(t),r=localStorage.getItem("favorite character"),c=JSON.parse(r);c&&e.props.setFavCharacters(c),e.props.setCharacters(a.data.results),e.props.setTotalCharactersCount(t.data.count)}))}},{key:"componentDidUpdate",value:function(e){var t=this.props;localStorage.setItem("favorite character",JSON.stringify(t.favoriteCharacters));var a=localStorage.getItem("favorite character"),r=JSON.parse(a);if(r)return Object(u.a)(Object(u.a)({},this.props),{},{favoriteCharacters:r})}},{key:"render",value:function(){return Object(k.jsx)(q,{onPageChanged:this.onPageChanged,getCharacters:this.props.getCharacters,characters:this.props.characters,currentPage:this.props.currentPage,totalCharactersCount:this.props.totalCharactersCount,pageSize:this.props.pageSize,addToFavorite:this.props.addToFavorite,deleteFromFavorite:this.props.deleteFromFavorite,onFilterChanged:this.onFilterChanged})}}]),a}(c.a.Component),Z=Object(F.b)((function(e){return{characters:e.favoriteCharacters.characters,favoriteCharacters:e.favoriteCharacters.favoriteCharacters,pageSize:e.favoriteCharacters.pageSize,totalCharactersCount:e.favoriteCharacters.totalCharactersCount,currentPage:e.favoriteCharacters.currentPage,isFavorite:e.favoriteCharacters.isFavorite,term:e.favoriteCharacters.filter.term}}),(function(e){return{addToFavorite:function(t,a){e(b(t,a))},deleteFromFavorite:function(){e(g())},setCharacters:function(t){e(function(e){return{type:v,characters:e}}(t))},setFavCharacters:function(t){e(O(t))},setCurrentPage:function(t){e(function(e){return{type:j,currentPage:e}}(t))},setTotalCharactersCount:function(t){e(function(e){return{type:f,totalCharactersCount:e}}(t))},setFilter:function(t){e(function(e){return{type:C,filter:e}}(t))}}}))(K),Q=function(e){return Object(k.jsx)(s.a,{basename:"/test-swapi",children:Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(H,{}),Object(k.jsxs)("div",{className:"content-wrapper",children:[Object(k.jsx)(o.a,{exact:!0,path:"/",render:function(){return Object(k.jsx)(Z,{})}}),Object(k.jsx)(o.a,{exact:!0,path:"/favorites",render:function(){return Object(k.jsx)(U,{})}})]})]})})},X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,84)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),r(e),c(e),n(e),i(e)}))},$=a(35),ee=Object($.a)({favoriteCharacters:_}),te=Object($.b)(ee);i.a.render(Object(k.jsx)(F.a,{store:te,children:Object(k.jsx)(Q,{})}),document.getElementById("root")),X()}},[[83,1,2]]]);
//# sourceMappingURL=main.d0a8110f.chunk.js.map